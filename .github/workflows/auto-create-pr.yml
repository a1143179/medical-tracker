name: Auto Process Merged PR

on:
  pull_request:
    types: [closed]
    branches:
      - main

jobs:
  process-merged-pr:
    runs-on: ubuntu-latest
    if: github.event.pull_request.merged == true
    env:
      GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Process merged PR
        run: |
          echo "Processing merged PR: ${{ github.event.pull_request.title }}"
          echo "Source branch: ${{ github.event.pull_request.head.ref }}"
          echo "Target branch: ${{ github.event.pull_request.base.ref }}"
          echo "Merged by: ${{ github.event.pull_request.merged_by.login }}"
          echo "Merge commit SHA: ${{ github.event.pull_request.merge_commit_sha }}"
          
          # Add your post-merge processing logic here
          # For example:
          # - Clean up temporary branches
          # - Update documentation
          # - Trigger deployments
          # - Send notifications
          
          echo "PR merge processing completed"

      - name: Cleanup (Optional)
        run: |
          echo "Performing post-merge cleanup tasks..."
          # Add cleanup logic here if needed 